<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>streamed_animation_channel.cpp File Reference</h1><code>#include &quot;<a class="el" href="lib_2moo_2pch_8hpp.html">pch.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="streamed__animation__channel_8hpp.html">streamed_animation_channel.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="diary_8hpp.html">cstdmf/diary.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="binaryfile_8hpp.html">cstdmf/binaryfile.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="interpolated__animation__channel_8hpp.html">interpolated_animation_channel.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="memory__tracker_8hpp.html">cstdmf/memory_tracker.hpp</a>&quot;</code><br>

<p>
Include dependency graph for streamed_animation_channel.cpp:<p><center><img src="streamed__animation__channel_8cpp__incl.png" border="0" usemap="#streamed_animation_channel.cpp_map" alt=""></center>
<map name="streamed_animation_channel.cpp_map">
<area href="lib_2moo_2pch_8hpp.html" shape="rect" coords="393,5,468,32" alt="">
<area href="streamed__animation__channel_8hpp.html" shape="rect" coords="308,56,553,83" alt="">
<area href="diary_8hpp.html" shape="rect" coords="365,107,496,133" alt="">
<area href="binaryfile_8hpp.html" shape="rect" coords="349,157,512,184" alt="">
<area href="interpolated__animation__channel_8hpp.html" shape="rect" coords="300,208,561,235" alt="">
<area href="memory__tracker_8hpp.html" shape="rect" coords="328,259,533,285" alt="">
</map>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceMoo.html">Moo</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#466c8bfdb9eeb50581fda6beda9d2ea6">SEPARATE_READ_THREAD</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The SEPARATE_READ_THREAD token specifies whether streamed animations should use a separate thread for ReadFile operations.  <a href="#466c8bfdb9eeb50581fda6beda9d2ea6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#09d805684144159287f8ce9546fee0cf">calcNumWords_PART</a>(kname, kchar, ktype)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#a0bf752e78e2c21924bbdf5de8bedad5">SAC_result_PART</a>(kname, kheader, ktype, interpolator)</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; std::pair&lt;<br>
 float, KeyType &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#63965257d0f103628f26a214866021cd">KeyFrames</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; <a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#02838d2009f330601f8c780c49b231c5">Roster</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; KeyType &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#ee72be8d1fcac8bdd775d3b73ca24bb9">Values</a></td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#c23767536972c9d5755fb98029e932fc">s_componentPriority</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#99990567bdc1829204d1dcbff59660ec">IGNORE_THIS_COMPONENT_WATCHER_INIT</a> = bwWatchInt( ::<a class="el" href="navigator_8cpp.html#c23767536972c9d5755fb98029e932fc">s_componentPriority</a>, mf_debugMunge( __FILE__, &quot;Moo&quot; ) )</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceMoo.html#753346865a6ebd9a231cb8536522b1ee">Moo::s_CRCons</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceMoo.html#b08283c3baa9491aa1a9cccb8569456b">Moo::s_CRDest</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceMoo.html#1a0c4000cf78fa2721120fed227a9a6f">Moo::s_CRLive</a> = <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>(-1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="streamed__animation__channel_8cpp.html#02838d2009f330601f8c780c49b231c5">Roster</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#e95c95f3e6800b0e5bea81cda38a7d92">roster_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="streamed__animation__channel_8cpp.html#ee72be8d1fcac8bdd775d3b73ca24bb9">Values</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#51bfdf343685e3d0b81a17dc93b092dc">values_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">KeyType&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#e198f56626d20469a8b7d05a94c9aaed">fallback_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="streamed__animation__channel_8cpp.html#63965257d0f103628f26a214866021cd">KeyFrames</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#d5bb1b58c88b7e9e7918c8d4f951c8dc">frames_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#a643c42d8b70283bb8a624e4acedaf53">lastKeyOffset_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#8d3bf07514b81ecc615a18f764ca9af6">firstKeyOffset_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="streamed__animation__channel_8cpp.html#23639b9425d5e5f027ecf2bfeb91863d">lastKeyFallback_</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="09d805684144159287f8ce9546fee0cf"></a><!-- doxytag: member="streamed_animation_channel.cpp::calcNumWords_PART" ref="09d805684144159287f8ce9546fee0cf" args="(kname, kchar, ktype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define calcNumWords_PART          </td>
          <td>(</td>
          <td class="paramtype">kname,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kchar,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ktype&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment">timeSum = 0;                                                    \
    roster = this-&gt;kname##<a class="code" href="streamed__animation__channel_8cpp.html#02838d2009f330601f8c780c49b231c5">Roster</a>();                                 \
    <span class="keyword">const</span> ktype * kname##KeyData = this-&gt;kname##KeyData();          \
    <span class="keywordflow">do</span>                                                              \
    {                                                               \
        <a class="code" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a> durHere = *roster++;                                  \
        timeSum += durHere &amp; 0x7F;                                  \
        <span class="keywordflow">if</span> (!(durHere &amp; 0x80)) kname##KeyData++;                    \
    } <span class="keywordflow">while</span> (timeSum &lt; <a class="code" href="streamed__animation__channel_8hpp.html#3ccea8abceb588adea430557fdfd14cf">STREAM_BLOCK_SIZE</a>);                          \
    <span class="keywordflow">if</span> (!(kchar##Header_.rosterOffset_ &amp; 0x80)) kname##KeyData++;   \
    <span class="keywordflow">if</span> (kname##KeyData != this-&gt;kname##KeyData())                   \
        endWord = ((<a class="code" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>*)kname##KeyData) - ((<a class="code" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>*)<span class="keyword">this</span>);      \
</pre></div>
</div>
</div><p>
<a class="anchor" name="a0bf752e78e2c21924bbdf5de8bedad5"></a><!-- doxytag: member="streamed_animation_channel.cpp::SAC_result_PART" ref="a0bf752e78e2c21924bbdf5de8bedad5" args="(kname, kheader, ktype, interpolator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAC_result_PART          </td>
          <td>(</td>
          <td class="paramtype">kname,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">kheader,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ktype,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">interpolator&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="466c8bfdb9eeb50581fda6beda9d2ea6"></a><!-- doxytag: member="streamed_animation_channel.cpp::SEPARATE_READ_THREAD" ref="466c8bfdb9eeb50581fda6beda9d2ea6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEPARATE_READ_THREAD&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The SEPARATE_READ_THREAD token specifies whether streamed animations should use a separate thread for ReadFile operations. 
<p>
If this token is not defined, ReadFile will block the main thread, causing occasional frame-rate glitches. 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="63965257d0f103628f26a214866021cd"></a><!-- doxytag: member="streamed_animation_channel.cpp::KeyFrames" ref="63965257d0f103628f26a214866021cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt; std::pair&lt; float, KeyType &gt; &gt; <a class="el" href="streamed__animation__channel_8cpp.html#63965257d0f103628f26a214866021cd">KeyFrames</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="02838d2009f330601f8c780c49b231c5"></a><!-- doxytag: member="streamed_animation_channel.cpp::Roster" ref="02838d2009f330601f8c780c49b231c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a>&gt; <a class="el" href="streamed__animation__channel_8cpp.html#02838d2009f330601f8c780c49b231c5">Roster</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ee72be8d1fcac8bdd775d3b73ca24bb9"></a><!-- doxytag: member="streamed_animation_channel.cpp::Values" ref="ee72be8d1fcac8bdd775d3b73ca24bb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;KeyType&gt; <a class="el" href="streamed__animation__channel_8cpp.html#ee72be8d1fcac8bdd775d3b73ca24bb9">Values</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="e198f56626d20469a8b7d05a94c9aaed"></a><!-- doxytag: member="streamed_animation_channel.cpp::fallback_" ref="e198f56626d20469a8b7d05a94c9aaed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KeyType <a class="el" href="streamed__animation__channel_8cpp.html#e198f56626d20469a8b7d05a94c9aaed">fallback_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8d3bf07514b81ecc615a18f764ca9af6"></a><!-- doxytag: member="streamed_animation_channel.cpp::firstKeyOffset_" ref="8d3bf07514b81ecc615a18f764ca9af6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a> <a class="el" href="streamed__animation__channel_8cpp.html#8d3bf07514b81ecc615a18f764ca9af6">firstKeyOffset_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d5bb1b58c88b7e9e7918c8d4f951c8dc"></a><!-- doxytag: member="streamed_animation_channel.cpp::frames_" ref="d5bb1b58c88b7e9e7918c8d4f951c8dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="streamed__animation__channel_8cpp.html#63965257d0f103628f26a214866021cd">KeyFrames</a> <a class="el" href="streamed__animation__channel_8cpp.html#d5bb1b58c88b7e9e7918c8d4f951c8dc">frames_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="99990567bdc1829204d1dcbff59660ec"></a><!-- doxytag: member="streamed_animation_channel.cpp::IGNORE_THIS_COMPONENT_WATCHER_INIT" ref="99990567bdc1829204d1dcbff59660ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="navigator_8cpp.html#99990567bdc1829204d1dcbff59660ec">IGNORE_THIS_COMPONENT_WATCHER_INIT</a> = bwWatchInt( ::<a class="el" href="navigator_8cpp.html#c23767536972c9d5755fb98029e932fc">s_componentPriority</a>, mf_debugMunge( __FILE__, &quot;Moo&quot; ) )<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="23639b9425d5e5f027ecf2bfeb91863d"></a><!-- doxytag: member="streamed_animation_channel.cpp::lastKeyFallback_" ref="23639b9425d5e5f027ecf2bfeb91863d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="streamed__animation__channel_8cpp.html#23639b9425d5e5f027ecf2bfeb91863d">lastKeyFallback_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a643c42d8b70283bb8a624e4acedaf53"></a><!-- doxytag: member="streamed_animation_channel.cpp::lastKeyOffset_" ref="a643c42d8b70283bb8a624e4acedaf53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a> <a class="el" href="streamed__animation__channel_8cpp.html#a643c42d8b70283bb8a624e4acedaf53">lastKeyOffset_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e95c95f3e6800b0e5bea81cda38a7d92"></a><!-- doxytag: member="streamed_animation_channel.cpp::roster_" ref="e95c95f3e6800b0e5bea81cda38a7d92" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="streamed__animation__channel_8cpp.html#02838d2009f330601f8c780c49b231c5">Roster</a> <a class="el" href="streamed__animation__channel_8cpp.html#e95c95f3e6800b0e5bea81cda38a7d92">roster_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c23767536972c9d5755fb98029e932fc"></a><!-- doxytag: member="streamed_animation_channel.cpp::s_componentPriority" ref="c23767536972c9d5755fb98029e932fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="navigator_8cpp.html#c23767536972c9d5755fb98029e932fc">s_componentPriority</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="51bfdf343685e3d0b81a17dc93b092dc"></a><!-- doxytag: member="streamed_animation_channel.cpp::values_" ref="51bfdf343685e3d0b81a17dc93b092dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="streamed__animation__channel_8cpp.html#ee72be8d1fcac8bdd775d3b73ca24bb9">Values</a> <a class="el" href="streamed__animation__channel_8cpp.html#51bfdf343685e3d0b81a17dc93b092dc">values_</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
