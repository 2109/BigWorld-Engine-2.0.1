<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>OcclusionQueryHelper Class Reference</h1><!-- doxytag: class="OcclusionQueryHelper" --><!-- doxytag: inherits="Moo::DeviceCallback" -->This helper class handles asynchronous occlusion queries.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;occlusion_query_helper.hpp&gt;</code>
<p>
Inheritance diagram for OcclusionQueryHelper:<p><center><img src="classOcclusionQueryHelper__inherit__graph.png" border="0" usemap="#OcclusionQueryHelper__inherit__map" alt="Inheritance graph"></center>
<map name="OcclusionQueryHelper__inherit__map">
<area href="classMoo_1_1DeviceCallback.html" shape="rect" coords="11,5,168,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for OcclusionQueryHelper:<p><center><img src="classOcclusionQueryHelper__coll__graph.png" border="0" usemap="#OcclusionQueryHelper__coll__map" alt="Collaboration graph"></center>
<map name="OcclusionQueryHelper__coll__map">
<area href="classMoo_1_1DeviceCallback.html" shape="rect" coords="5,5,163,32" alt="">
<area href="classHandlePool.html" shape="rect" coords="187,5,283,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classOcclusionQueryHelper-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#f22c5d590fc3f6ec9588a41ccc43cfd4">OcclusionQueryHelper</a> (<a class="el" href="stdmf_8hpp.html#992ad4c1d8648a4148e878ef1487f968">uint16</a> maxHandles, <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a> defaultValue=0, <a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a> numFrames=4)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#f22c5d590fc3f6ec9588a41ccc43cfd4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#de1f0d011b93f95231ebd7e83855b369">~OcclusionQueryHelper</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#de1f0d011b93f95231ebd7e83855b369"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#e64e589099bcfbb719b9c56642323d01">begin</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method begins a frame of occlusion queries.  <a href="#e64e589099bcfbb719b9c56642323d01"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#1a842c5127ccabd87587bdb35fd077c9">beginQuery</a> (<a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a> idx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called to begin an occlusion query.  <a href="#1a842c5127ccabd87587bdb35fd077c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#8e96ad04069b6d301597e27103a41d05">endQuery</a> (<a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a> idx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called to notify this class that the visibility testing geometry has been drawn.  <a href="#8e96ad04069b6d301597e27103a41d05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#afc8ed4cb556616b256a5a5461e5d1e4">end</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method ends a frame of occlusion queries.  <a href="#afc8ed4cb556616b256a5a5461e5d1e4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#968e3294bd971fadcfbd2be8aa947d64">avgResult</a> (<a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a> idx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method returns the average number of pixels drawn by visibility testing geometry represented by the handle.  <a href="#968e3294bd971fadcfbd2be8aa947d64"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classHandlePool.html">HandlePool</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#24fd0fe9764ff666eb0670ca1ca13a84">handlePool</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOcclusionQueryHelper.html#1215dc28ff36f8f6a516c82dbb3b88b9">deleteUnmanagedObjects</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This helper class handles asynchronous occlusion queries. 
<p>
To use it, obtain query handles by passing in an ID, and draw some geometry in between beginQuery and endQuery calls. Internally, the helper will handle the asynchronous occlusion query calls by storing multiple frames of results - call avgResult to obtain the answer. Note that if you are testing 'coverage' instead of 'visibility' then you may not want to have 0 as your default value, instead you may like to use the full coverage value. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="f22c5d590fc3f6ec9588a41ccc43cfd4"></a><!-- doxytag: member="OcclusionQueryHelper::OcclusionQueryHelper" ref="f22c5d590fc3f6ec9588a41ccc43cfd4" args="(uint16 maxHandles, uint32 defaultValue=0, uint8 numFrames=4)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OcclusionQueryHelper::OcclusionQueryHelper           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdmf_8hpp.html#992ad4c1d8648a4148e878ef1487f968">uint16</a>&nbsp;</td>
          <td class="paramname"> <em>maxHandles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td>
          <td class="paramname"> <em>defaultValue</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdmf_8hpp.html#0da3c0389d28f6e29397f49b00b56c17">uint8</a>&nbsp;</td>
          <td class="paramname"> <em>numFrames</em> = <code>4</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>

</div>
</div><p>
<a class="anchor" name="de1f0d011b93f95231ebd7e83855b369"></a><!-- doxytag: member="OcclusionQueryHelper::~OcclusionQueryHelper" ref="de1f0d011b93f95231ebd7e83855b369" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OcclusionQueryHelper::~OcclusionQueryHelper           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="968e3294bd971fadcfbd2be8aa947d64"></a><!-- doxytag: member="OcclusionQueryHelper::avgResult" ref="968e3294bd971fadcfbd2be8aa947d64" args="(HandlePool::Handle idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int OcclusionQueryHelper::avgResult           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a>&nbsp;</td>
          <td class="paramname"> <em>h</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method returns the average number of pixels drawn by visibility testing geometry represented by the handle. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>an OcclusionQueryHelper::Handle identifying the test </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>int average number of pixels. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e64e589099bcfbb719b9c56642323d01"></a><!-- doxytag: member="OcclusionQueryHelper::begin" ref="e64e589099bcfbb719b9c56642323d01" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OcclusionQueryHelper::begin           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method begins a frame of occlusion queries. 
<p>
It must be called before calling <a class="el" href="classOcclusionQueryHelper.html#1a842c5127ccabd87587bdb35fd077c9">beginQuery()</a> or handleFromId(). If you call this, you must call <a class="el" href="classOcclusionQueryHelper.html#afc8ed4cb556616b256a5a5461e5d1e4">end()</a> too.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classOcclusionQueryHelper.html#e64e589099bcfbb719b9c56642323d01">OcclusionQueryHelper::begin</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1a842c5127ccabd87587bdb35fd077c9"></a><!-- doxytag: member="OcclusionQueryHelper::beginQuery" ref="1a842c5127ccabd87587bdb35fd077c9" args="(HandlePool::Handle idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OcclusionQueryHelper::beginQuery           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a>&nbsp;</td>
          <td class="paramname"> <em>h</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is called to begin an occlusion query. 
<p>
Call it just before drawing your geometry that you are using to test visibility with.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>an OcclusionQueryHelper::Handle identifying the test</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>bool success of the query. fails if the device is lost. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1215dc28ff36f8f6a516c82dbb3b88b9"></a><!-- doxytag: member="OcclusionQueryHelper::deleteUnmanagedObjects" ref="1215dc28ff36f8f6a516c82dbb3b88b9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OcclusionQueryHelper::deleteUnmanagedObjects           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Reimplemented from <a class="el" href="classMoo_1_1DeviceCallback.html#f4efc6e1037ce7d08cd1e98ac7918262">Moo::DeviceCallback</a>.
</div>
</div><p>
<a class="anchor" name="afc8ed4cb556616b256a5a5461e5d1e4"></a><!-- doxytag: member="OcclusionQueryHelper::end" ref="afc8ed4cb556616b256a5a5461e5d1e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OcclusionQueryHelper::end           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method ends a frame of occlusion queries. 
<p>
It must be called to make a pair of <a class="el" href="classOcclusionQueryHelper.html#e64e589099bcfbb719b9c56642323d01">begin()</a> and <a class="el" href="classOcclusionQueryHelper.html#afc8ed4cb556616b256a5a5461e5d1e4">end()</a> calls.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classOcclusionQueryHelper.html#e64e589099bcfbb719b9c56642323d01">OcclusionQueryHelper::begin</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="8e96ad04069b6d301597e27103a41d05"></a><!-- doxytag: member="OcclusionQueryHelper::endQuery" ref="8e96ad04069b6d301597e27103a41d05" args="(HandlePool::Handle idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OcclusionQueryHelper::endQuery           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHandlePool.html#71d62503a35c7e8a56038b9803871218">HandlePool::Handle</a>&nbsp;</td>
          <td class="paramname"> <em>h</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is called to notify this class that the visibility testing geometry has been drawn. 
<p>
Must be matched with <a class="el" href="classOcclusionQueryHelper.html#1a842c5127ccabd87587bdb35fd077c9">beginQuery()</a><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>an OcclusionQueryHelper::Handle identifying the test </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classOcclusionQueryHelper.html#1a842c5127ccabd87587bdb35fd077c9">OcclusionQueryHelper::beginQuery</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="24fd0fe9764ff666eb0670ca1ca13a84"></a><!-- doxytag: member="OcclusionQueryHelper::handlePool" ref="24fd0fe9764ff666eb0670ca1ca13a84" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classHandlePool.html">HandlePool</a>&amp; OcclusionQueryHelper::handlePool           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="occlusion__query__helper_8hpp.html">occlusion_query_helper.hpp</a><li><a class="el" href="occlusion__query__helper_8cpp.html">occlusion_query_helper.cpp</a></ul>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
