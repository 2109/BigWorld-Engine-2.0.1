<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>BSP Class Reference</h1><!-- doxytag: class="BSP" -->This class is used to implement a <a class="el" href="classBSP.html">BSP</a> (Binary Space Partitioning) tree.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;bsp.hpp&gt;</code>
<p>
Collaboration diagram for BSP:<p><center><img src="classBSP__coll__graph.png" border="0" usemap="#BSP__coll__map" alt="Collaboration graph"></center>
<map name="BSP__coll__map">
<area href="classPlaneEq.html" shape="rect" coords="5,5,80,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classBSP-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#93b6b5d9cb47df83c9bb2359d03dfd55">intersects</a> (const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> &amp;triangle, const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> **ppHitTriangle=NULL) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method returns whether the input triangle intersects any triangle in this node or any child nodes.  <a href="#93b6b5d9cb47df83c9bb2359d03dfd55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#fdc8f1a218acf83a704621a961bc438a">intersects</a> (const <a class="el" href="classVector3.html">Vector3</a> &amp;<a class="el" href="perlin__noise_8cpp.html#e14eb244407d3c32f2c387e98d3f0f65">start</a>, const <a class="el" href="classVector3.html">Vector3</a> &amp;end, float &amp;dist, const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> **ppHitTriangle=NULL, <a class="el" href="classCollisionVisitor.html">CollisionVisitor</a> *pVisitor=NULL) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method returns whether the input interval intersects any triangle in this node or any children.  <a href="#fdc8f1a218acf83a704621a961bc438a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#7e030d766931c0b2bae65b9e1c1f66da">intersects</a> (const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> &amp;triangle, const <a class="el" href="classVector3.html">Vector3</a> &amp;translation, <a class="el" href="classCollisionVisitor.html">CollisionVisitor</a> *pVisitor=NULL) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method intersects the volume formed by moving a triangle by a given translation, with the <a class="el" href="classBSP.html">BSP</a> tree.  <a href="#7e030d766931c0b2bae65b9e1c1f66da"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#a1414719dfa79de65b50edcc68ac13ac">getNumNodes</a> (int &amp;numNodes, int &amp;maxTriangles) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method sets the input references to be the number of nodes and triangle in this subtree.  <a href="#a1414719dfa79de65b50edcc68ac13ac"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#60a6dfff609016350d7b1a0ebc44a225">dump</a> (int depth)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Debugging method to dump the contents of this <a class="el" href="classBSP.html">BSP</a> tree.  <a href="#60a6dfff609016350d7b1a0ebc44a225"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#10ea8937816059946401ca5f91b553d8">size</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For debugging.  <a href="#10ea8937816059946401ca5f91b553d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#332423a6546675716d88194bfa513cfa">load</a> (const <a class="el" href="classBSPTree.html">BSPTree</a> &amp;tree, <a class="el" href="classBSPFile.html">BSPFile</a> &amp;bspFile, <a class="el" href="classBSPAllocator.html">BSPAllocator</a> &amp;allocator)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method loads the <a class="el" href="classBSP.html">BSP</a> node from the input file along with its descendants.  <a href="#332423a6546675716d88194bfa513cfa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#b21756ad78fafa0f970f1e4bc344de07">save</a> (FILE *pFile, const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> *pFront) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method saves this <a class="el" href="classBSP.html">BSP</a> node to the input file along with its descendants.  <a href="#b21756ad78fafa0f970f1e4bc344de07"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#611651cfccdf6653ab8beffd1d2e7c77">BSPConstructor</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#51fc80f63c2f6dd49a80a15dfd006edf">BSPAllocator</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBSP.html#d705f319e90ac36e744db020d136c8e0">BSPTree</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class is used to implement a <a class="el" href="classBSP.html">BSP</a> (Binary Space Partitioning) tree. 
<p>
Objects of this type can be thought of as both a node of a <a class="el" href="classBSP.html">BSP</a> tree and the <a class="el" href="classBSP.html">BSP</a> tree that is root at that node. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="60a6dfff609016350d7b1a0ebc44a225"></a><!-- doxytag: member="BSP::dump" ref="60a6dfff609016350d7b1a0ebc44a225" args="(int depth)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BSP::dump           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>depth</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Debugging method to dump the contents of this <a class="el" href="classBSP.html">BSP</a> tree. 
<p>

</div>
</div><p>
<a class="anchor" name="a1414719dfa79de65b50edcc68ac13ac"></a><!-- doxytag: member="BSP::getNumNodes" ref="a1414719dfa79de65b50edcc68ac13ac" args="(int &amp;numNodes, int &amp;maxTriangles) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BSP::getNumNodes           </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>numNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>maxTriangles</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method sets the input references to be the number of nodes and triangle in this subtree. 
<p>
This method expects numNodes to be initialised to some value ( zero for the first call ). 
</div>
</div><p>
<a class="anchor" name="7e030d766931c0b2bae65b9e1c1f66da"></a><!-- doxytag: member="BSP::intersects" ref="7e030d766931c0b2bae65b9e1c1f66da" args="(const WorldTriangle &amp;triangle, const Vector3 &amp;translation, CollisionVisitor *pVisitor=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BSP::intersects           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>triangle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classVector3.html">Vector3</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>translation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCollisionVisitor.html">CollisionVisitor</a> *&nbsp;</td>
          <td class="paramname"> <em>pVisitor</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method intersects the volume formed by moving a triangle by a given translation, with the <a class="el" href="classBSP.html">BSP</a> tree. 
<p>
Any triangles that intersect this volume are returned in the vector passed by reference as the last argument. The vector of triangles is not cleared. Triangles parallel to translation are not considered. 
</div>
</div><p>
<a class="anchor" name="fdc8f1a218acf83a704621a961bc438a"></a><!-- doxytag: member="BSP::intersects" ref="fdc8f1a218acf83a704621a961bc438a" args="(const Vector3 &amp;start, const Vector3 &amp;end, float &amp;dist, const WorldTriangle **ppHitTriangle=NULL, CollisionVisitor *pVisitor=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BSP::intersects           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classVector3.html">Vector3</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classVector3.html">Vector3</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float &amp;&nbsp;</td>
          <td class="paramname"> <em>dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> **&nbsp;</td>
          <td class="paramname"> <em>ppHitTriangle</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCollisionVisitor.html">CollisionVisitor</a> *&nbsp;</td>
          <td class="paramname"> <em>pVisitor</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method returns whether the input interval intersects any triangle in this node or any children. 
<p>
If it does, dist is set to the fraction of the distance along the vector that the intersection point lies.<p>
Note: In general, you will want to pass in a float that is set to 1 for the dist parameter.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>The start point of the interval to test for collision. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end</em>&nbsp;</td><td>The end point of the interval to test for collision. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dist</em>&nbsp;</td><td>A reference to a float. Usually this should be set to 1 before the method is called</td></tr>
  </table>
</dl>
The input value of this float is the fraction of the interval that should be considered. For example, if dist is 0.5, only the interval from <em>start</em> to the midpoint of <em>start</em> and <em>end</em> is considered for collision.<p>
After the call, if a collision occurred, this value is set to the fraction along the interval that the collision occurred. Thus, the collision point can be calculated as start + dist * (end - start). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ppHitTriangle</em>&nbsp;</td><td>A pointer to a world triangle pointer. If not NULL, the pointer pointed to by this parameter is set to the pointer to the triangle that caused the collision. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pVisitor</em>&nbsp;</td><td>A pointer to a visitor object. If not NULL, this object's 'visit' method is called for each triangle hit.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if there was a collision, otherwise false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="93b6b5d9cb47df83c9bb2359d03dfd55"></a><!-- doxytag: member="BSP::intersects" ref="93b6b5d9cb47df83c9bb2359d03dfd55" args="(const WorldTriangle &amp;triangle, const WorldTriangle **ppHitTriangle=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BSP::intersects           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>triangle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> **&nbsp;</td>
          <td class="paramname"> <em>ppHitTriangle</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method returns whether the input triangle intersects any triangle in this node or any child nodes. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>triangle</em>&nbsp;</td><td>The triangle to test for collision with the <a class="el" href="classBSP.html">BSP</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ppHitTriangle</em>&nbsp;</td><td>If not NULL and a collision occurs, the pointer pointed to by this variable is set to point to the triangle that was collided with. If the triangle that is hit first is important, you should pass in the "starting" vertex as the first vertex of the test triangle.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if an intersection occurred, otherwise false. </dd></dl>

</div>
</div><p>
<a class="anchor" name="332423a6546675716d88194bfa513cfa"></a><!-- doxytag: member="BSP::load" ref="332423a6546675716d88194bfa513cfa" args="(const BSPTree &amp;tree, BSPFile &amp;bspFile, BSPAllocator &amp;allocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BSP::load           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBSPTree.html">BSPTree</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBSPFile.html">BSPFile</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>bspFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBSPAllocator.html">BSPAllocator</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>allocator</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method loads the <a class="el" href="classBSP.html">BSP</a> node from the input file along with its descendants. 
<p>

</div>
</div><p>
<a class="anchor" name="b21756ad78fafa0f970f1e4bc344de07"></a><!-- doxytag: member="BSP::save" ref="b21756ad78fafa0f970f1e4bc344de07" args="(FILE *pFile, const WorldTriangle *pFront) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BSP::save           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>pFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classWorldTriangle.html">WorldTriangle</a> *&nbsp;</td>
          <td class="paramname"> <em>pFront</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method saves this <a class="el" href="classBSP.html">BSP</a> node to the input file along with its descendants. 
<p>
A pointer to the front triangle is passed in so that each triangles index can be calculated. 
</div>
</div><p>
<a class="anchor" name="10ea8937816059946401ca5f91b553d8"></a><!-- doxytag: member="BSP::size" ref="10ea8937816059946401ca5f91b553d8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a> BSP::size           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
For debugging. 
<p>

</div>
</div><p>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="51fc80f63c2f6dd49a80a15dfd006edf"></a><!-- doxytag: member="BSP::BSPAllocator" ref="51fc80f63c2f6dd49a80a15dfd006edf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBSPAllocator.html">BSPAllocator</a><code> [friend]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="611651cfccdf6653ab8beffd1d2e7c77"></a><!-- doxytag: member="BSP::BSPConstructor" ref="611651cfccdf6653ab8beffd1d2e7c77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBSPConstructor.html">BSPConstructor</a><code> [friend]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d705f319e90ac36e744db020d136c8e0"></a><!-- doxytag: member="BSP::BSPTree" ref="d705f319e90ac36e744db020d136c8e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBSPTree.html">BSPTree</a><code> [friend]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="bsp_8hpp.html">bsp.hpp</a><li><a class="el" href="bsp_8cpp.html">bsp.cpp</a></ul>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
