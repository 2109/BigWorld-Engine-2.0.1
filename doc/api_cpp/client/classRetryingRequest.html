<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>RetryingRequest Class Reference</h1><!-- doxytag: class="RetryingRequest" --><!-- doxytag: inherits="Mercury::ShutdownSafeReplyMessageHandler,TimerHandler,SafeReferenceCount" -->This class provides client-push reliability for off-channel <a class="el" href="namespaceMercury.html">Mercury</a> messages.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;retrying_request.hpp&gt;</code>
<p>
Inheritance diagram for RetryingRequest:<p><center><img src="classRetryingRequest__inherit__graph.png" border="0" usemap="#RetryingRequest__inherit__map" alt="Inheritance graph"></center>
<map name="RetryingRequest__inherit__map">
<area href="classBaseAppLoginRequest.html" shape="rect" coords="228,155,396,181" alt="">
<area href="classLoginAppLoginRequest.html" shape="rect" coords="420,155,591,181" alt="">
<area href="classMercury_1_1ShutdownSafeReplyMessageHandler.html" shape="rect" coords="5,5,328,32" alt="">
<area href="classTimerHandler.html" shape="rect" coords="352,5,464,32" alt="">
<area href="classSafeReferenceCount.html" shape="rect" coords="488,5,643,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for RetryingRequest:<p><center><img src="classRetryingRequest__coll__graph.png" border="0" usemap="#RetryingRequest__coll__map" alt="Collaboration graph"></center>
<map name="RetryingRequest__coll__map">
<area href="classMercury_1_1ShutdownSafeReplyMessageHandler.html" shape="rect" coords="248,5,571,32" alt="">
<area href="classTimerHandler.html" shape="rect" coords="17,75,129,101" alt="">
<area href="classMercury_1_1NetworkInterface.html" shape="rect" coords="312,116,507,143" alt="">
<area href="classSafeReferenceCount.html" shape="rect" coords="332,231,487,257" alt="">
<area href="classSmartPointer.html" shape="rect" coords="297,281,521,308" alt="">
<area href="classMercury_1_1InterfaceElement.html" shape="rect" coords="312,372,507,399" alt="">
<area href="classTimerHandle.html" shape="rect" coords="356,423,463,449" alt="">
<area href="classMercury_1_1Address.html" shape="rect" coords="7,140,140,167" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classRetryingRequest-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#1c47d731360bbdc0ff33a03cf3739512">RetryingRequest</a> (<a class="el" href="classLoginHandler.html">LoginHandler</a> &amp;parent, const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a> &amp;addr, const <a class="el" href="classMercury_1_1InterfaceElement.html">Mercury::InterfaceElement</a> &amp;ie, int retryPeriod=<a class="el" href="classRetryingRequest.html#66c5d6edfe242764061e615ed0c2f3b1">DEFAULT_RETRY_PERIOD</a>, int timeoutPeriod=<a class="el" href="classRetryingRequest.html#b0ef9dfa7d59a62e05904028476d57c0">DEFAULT_TIMEOUT_PERIOD</a>, int maxAttempts=<a class="el" href="classRetryingRequest.html#d9c0ac0bed50b41f3da2f268715f6f5b">DEFAULT_MAX_ATTEMPTS</a>, bool useParentInterface=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#1c47d731360bbdc0ff33a03cf3739512"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#d96dc5e2a6f445fac6a538e5d435b18a">~RetryingRequest</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#d96dc5e2a6f445fac6a538e5d435b18a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#045d31b4b75ca7d8a2fb6b71a5ad02ca">handleMessage</a> (const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a> &amp;srcAddr, <a class="el" href="classMercury_1_1UnpackedMessageHeader.html">Mercury::UnpackedMessageHeader</a> &amp;header, <a class="el" href="classBinaryIStream.html">BinaryIStream</a> &amp;data, void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method handles a reply to one of our requests.  <a href="#045d31b4b75ca7d8a2fb6b71a5ad02ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#28e63f61ed9cdd83539f025040377d66">handleException</a> (const <a class="el" href="classMercury_1_1NubException.html">Mercury::NubException</a> &amp;exc, void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method handles an exception, usually a timeout.  <a href="#28e63f61ed9cdd83539f025040377d66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#1d83df38e640580fd97dd8bb45199f5a">handleTimeout</a> (<a class="el" href="classTimerHandle.html">TimerHandle</a> handle, void *arg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method handles an internally scheduled timeout, which causes another attempt to be sent.  <a href="#1d83df38e640580fd97dd8bb45199f5a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#1f1bef481f5e4205b06175328f23bcaf">addRequestArgs</a> (<a class="el" href="classMercury_1_1Bundle.html">Mercury::Bundle</a> &amp;bundle)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method should stream on the args for the request.  <a href="#1f1bef481f5e4205b06175328f23bcaf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#268feb8d130568cf0f0477fcd1bbad15">onSuccess</a> (<a class="el" href="classBinaryIStream.html">BinaryIStream</a> &amp;data)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method will be called on the first reply.  <a href="#268feb8d130568cf0f0477fcd1bbad15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#e1f81a3fbdae53ae55f49dbc13cd3fd5">onFailure</a> (<a class="el" href="group__mercury.html#g9408f2e6640ac8539a11c93dda678e87">Mercury::Reason</a> reason)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called if the request should fail for any reason.  <a href="#e1f81a3fbdae53ae55f49dbc13cd3fd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#547a1a1c0b83b05ca4cec915375fc592">cancel</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method removes this request from the parent's childRequests_ list, which means it will be destroyed as soon as all of its outstanding requests have either been replied to (and ignored) or timed out.  <a href="#547a1a1c0b83b05ca4cec915375fc592"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#66c5d6edfe242764061e615ed0c2f3b1">DEFAULT_RETRY_PERIOD</a> = 1000000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default retry period for requests (1s).  <a href="#66c5d6edfe242764061e615ed0c2f3b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#b0ef9dfa7d59a62e05904028476d57c0">DEFAULT_TIMEOUT_PERIOD</a> = 8000000</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default timeout period for requests (8s).  <a href="#b0ef9dfa7d59a62e05904028476d57c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#d9c0ac0bed50b41f3da2f268715f6f5b">DEFAULT_MAX_ATTEMPTS</a> = 10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default limit for attempts.  <a href="#d9c0ac0bed50b41f3da2f268715f6f5b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#a4ecf16249a83f52367aeb43e255d680">setInterface</a> (<a class="el" href="classMercury_1_1NetworkInterface.html">Mercury::NetworkInterface</a> *pInterface)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method sets the network interface to be used by this object.  <a href="#a4ecf16249a83f52367aeb43e255d680"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#788763b3a406b5b5fec0a811e5b82019">send</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method sends the request once.  <a href="#788763b3a406b5b5fec0a811e5b82019"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classMercury_1_1EventDispatcher.html">Mercury::EventDispatcher</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#51733846e27ef8f400ee42b09414e01d">dispatcher</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSmartPointer.html">SmartPointer</a>&lt; <a class="el" href="classLoginHandler.html">LoginHandler</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#0adbf5b93c8d15f9510fdff0a0db1e39">pParent_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classMercury_1_1NetworkInterface.html">Mercury::NetworkInterface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#82f5c2058530aa3e3dbb15adf1bf192a">pInterface_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#944dcfd308762f08acab2eb1e4c3bb68">addr_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classMercury_1_1InterfaceElement.html">Mercury::InterfaceElement</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#7ed20165c3a91ec5ba9d463244e90c75">ie_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classTimerHandle.html">TimerHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#46e816cb3e844d91af7442bb44a5c353">timerHandle_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRetryingRequest.html#39891ade72a461185fee8fcab3b65c45">done_</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class provides client-push reliability for off-channel <a class="el" href="namespaceMercury.html">Mercury</a> messages. 
<p>
Basically it keeps sending requests until one comes back. This object deletes itself. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="1c47d731360bbdc0ff33a03cf3739512"></a><!-- doxytag: member="RetryingRequest::RetryingRequest" ref="1c47d731360bbdc0ff33a03cf3739512" args="(LoginHandler &amp;parent, const Mercury::Address &amp;addr, const Mercury::InterfaceElement &amp;ie, int retryPeriod=DEFAULT_RETRY_PERIOD, int timeoutPeriod=DEFAULT_TIMEOUT_PERIOD, int maxAttempts=DEFAULT_MAX_ATTEMPTS, bool useParentInterface=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RetryingRequest::RetryingRequest           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLoginHandler.html">LoginHandler</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMercury_1_1InterfaceElement.html">Mercury::InterfaceElement</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>retryPeriod</em> = <code><a class="el" href="classRetryingRequest.html#66c5d6edfe242764061e615ed0c2f3b1">DEFAULT_RETRY_PERIOD</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeoutPeriod</em> = <code><a class="el" href="classRetryingRequest.html#b0ef9dfa7d59a62e05904028476d57c0">DEFAULT_TIMEOUT_PERIOD</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxAttempts</em> = <code><a class="el" href="classRetryingRequest.html#d9c0ac0bed50b41f3da2f268715f6f5b">DEFAULT_MAX_ATTEMPTS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>useParentInterface</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>

</div>
</div><p>
<a class="anchor" name="d96dc5e2a6f445fac6a538e5d435b18a"></a><!-- doxytag: member="RetryingRequest::~RetryingRequest" ref="d96dc5e2a6f445fac6a538e5d435b18a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RetryingRequest::~RetryingRequest           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1f1bef481f5e4205b06175328f23bcaf"></a><!-- doxytag: member="RetryingRequest::addRequestArgs" ref="1f1bef481f5e4205b06175328f23bcaf" args="(Mercury::Bundle &amp;bundle)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void RetryingRequest::addRequestArgs           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMercury_1_1Bundle.html">Mercury::Bundle</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>bundle</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method should stream on the args for the request. 
<p>
The startRequest() call is taken care of beforehand. 
<p>
Implemented in <a class="el" href="classBaseAppLoginRequest.html#7210136a94ef6a2e634794b9c490be09">BaseAppLoginRequest</a>, and <a class="el" href="classLoginAppLoginRequest.html#155544dcbc1416ab78b9091befcd20fc">LoginAppLoginRequest</a>.
</div>
</div><p>
<a class="anchor" name="547a1a1c0b83b05ca4cec915375fc592"></a><!-- doxytag: member="RetryingRequest::cancel" ref="547a1a1c0b83b05ca4cec915375fc592" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::cancel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method removes this request from the parent's childRequests_ list, which means it will be destroyed as soon as all of its outstanding requests have either been replied to (and ignored) or timed out. 
<p>

</div>
</div><p>
<a class="anchor" name="51733846e27ef8f400ee42b09414e01d"></a><!-- doxytag: member="RetryingRequest::dispatcher" ref="51733846e27ef8f400ee42b09414e01d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMercury_1_1EventDispatcher.html">Mercury::EventDispatcher</a> &amp; RetryingRequest::dispatcher           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="28e63f61ed9cdd83539f025040377d66"></a><!-- doxytag: member="RetryingRequest::handleException" ref="28e63f61ed9cdd83539f025040377d66" args="(const Mercury::NubException &amp;exc, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::handleException           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMercury_1_1NubException.html">Mercury::NubException</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>exc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method handles an exception, usually a timeout. 
<p>
Whatever happens, it indicates that one of our attempts is over. 
<p>
Implements <a class="el" href="classMercury_1_1ReplyMessageHandler.html#0ee0b5168be5ed102b6b03650c3d7b08">Mercury::ReplyMessageHandler</a>.
</div>
</div><p>
<a class="anchor" name="045d31b4b75ca7d8a2fb6b71a5ad02ca"></a><!-- doxytag: member="RetryingRequest::handleMessage" ref="045d31b4b75ca7d8a2fb6b71a5ad02ca" args="(const Mercury::Address &amp;srcAddr, Mercury::UnpackedMessageHeader &amp;header, BinaryIStream &amp;data, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::handleMessage           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>srcAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMercury_1_1UnpackedMessageHeader.html">Mercury::UnpackedMessageHeader</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBinaryIStream.html">BinaryIStream</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method handles a reply to one of our requests. 
<p>

<p>
Implements <a class="el" href="classMercury_1_1ReplyMessageHandler.html#e2096b7cb6c502ca723a26c3eaa4c0bc">Mercury::ReplyMessageHandler</a>.
</div>
</div><p>
<a class="anchor" name="1d83df38e640580fd97dd8bb45199f5a"></a><!-- doxytag: member="RetryingRequest::handleTimeout" ref="1d83df38e640580fd97dd8bb45199f5a" args="(TimerHandle handle, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::handleTimeout           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTimerHandle.html">TimerHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method handles an internally scheduled timeout, which causes another attempt to be sent. 
<p>

<p>
Implements <a class="el" href="classTimerHandler.html#92a3d54d668b9a6e89d604ae046d1f28">TimerHandler</a>.
<p>
Reimplemented in <a class="el" href="classBaseAppLoginRequest.html#fca897124a9373cc5dd6ce4d12d8e6b0">BaseAppLoginRequest</a>.
</div>
</div><p>
<a class="anchor" name="e1f81a3fbdae53ae55f49dbc13cd3fd5"></a><!-- doxytag: member="RetryingRequest::onFailure" ref="e1f81a3fbdae53ae55f49dbc13cd3fd5" args="(Mercury::Reason reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void RetryingRequest::onFailure           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__mercury.html#g9408f2e6640ac8539a11c93dda678e87">Mercury::Reason</a>&nbsp;</td>
          <td class="paramname"> <em>reason</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method is called if the request should fail for any reason. 
<p>
This object will be deleted immediately afterwards. 
<p>
Reimplemented in <a class="el" href="classLoginAppLoginRequest.html#beb1661b09af4bf11f5c93327f4e40bb">LoginAppLoginRequest</a>.
</div>
</div><p>
<a class="anchor" name="268feb8d130568cf0f0477fcd1bbad15"></a><!-- doxytag: member="RetryingRequest::onSuccess" ref="268feb8d130568cf0f0477fcd1bbad15" args="(BinaryIStream &amp;data)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void RetryingRequest::onSuccess           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBinaryIStream.html">BinaryIStream</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method will be called on the first reply. 
<p>
This object will be deleted immediately afterwards. 
<p>
Implemented in <a class="el" href="classBaseAppLoginRequest.html#389b854f4ba874741924fc9e42e7e974">BaseAppLoginRequest</a>, and <a class="el" href="classLoginAppLoginRequest.html#6be98c8b79b94a3a95d42e042851f0d1">LoginAppLoginRequest</a>.
</div>
</div><p>
<a class="anchor" name="788763b3a406b5b5fec0a811e5b82019"></a><!-- doxytag: member="RetryingRequest::send" ref="788763b3a406b5b5fec0a811e5b82019" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::send           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method sends the request once. 
<p>
This method should be called as the last statement in the constructor of a derived class. 
</div>
</div><p>
<a class="anchor" name="a4ecf16249a83f52367aeb43e255d680"></a><!-- doxytag: member="RetryingRequest::setInterface" ref="a4ecf16249a83f52367aeb43e255d680" args="(Mercury::NetworkInterface *pInterface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RetryingRequest::setInterface           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMercury_1_1NetworkInterface.html">Mercury::NetworkInterface</a> *&nbsp;</td>
          <td class="paramname"> <em>pInterface</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method sets the network interface to be used by this object. 
<p>
You cannot call <a class="el" href="classRetryingRequest.html#788763b3a406b5b5fec0a811e5b82019">send()</a> until you have called this. 
</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="944dcfd308762f08acab2eb1e4c3bb68"></a><!-- doxytag: member="RetryingRequest::addr_" ref="944dcfd308762f08acab2eb1e4c3bb68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classMercury_1_1Address.html">Mercury::Address</a> <a class="el" href="classRetryingRequest.html#944dcfd308762f08acab2eb1e4c3bb68">RetryingRequest::addr_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d9c0ac0bed50b41f3da2f268715f6f5b"></a><!-- doxytag: member="RetryingRequest::DEFAULT_MAX_ATTEMPTS" ref="d9c0ac0bed50b41f3da2f268715f6f5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classRetryingRequest.html#d9c0ac0bed50b41f3da2f268715f6f5b">RetryingRequest::DEFAULT_MAX_ATTEMPTS</a> = 10<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default limit for attempts. 
<p>

</div>
</div><p>
<a class="anchor" name="66c5d6edfe242764061e615ed0c2f3b1"></a><!-- doxytag: member="RetryingRequest::DEFAULT_RETRY_PERIOD" ref="66c5d6edfe242764061e615ed0c2f3b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classRetryingRequest.html#66c5d6edfe242764061e615ed0c2f3b1">RetryingRequest::DEFAULT_RETRY_PERIOD</a> = 1000000<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default retry period for requests (1s). 
<p>

</div>
</div><p>
<a class="anchor" name="b0ef9dfa7d59a62e05904028476d57c0"></a><!-- doxytag: member="RetryingRequest::DEFAULT_TIMEOUT_PERIOD" ref="b0ef9dfa7d59a62e05904028476d57c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classRetryingRequest.html#b0ef9dfa7d59a62e05904028476d57c0">RetryingRequest::DEFAULT_TIMEOUT_PERIOD</a> = 8000000<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default timeout period for requests (8s). 
<p>

</div>
</div><p>
<a class="anchor" name="39891ade72a461185fee8fcab3b65c45"></a><!-- doxytag: member="RetryingRequest::done_" ref="39891ade72a461185fee8fcab3b65c45" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classRetryingRequest.html#39891ade72a461185fee8fcab3b65c45">RetryingRequest::done_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7ed20165c3a91ec5ba9d463244e90c75"></a><!-- doxytag: member="RetryingRequest::ie_" ref="7ed20165c3a91ec5ba9d463244e90c75" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classMercury_1_1InterfaceElement.html">Mercury::InterfaceElement</a>&amp; <a class="el" href="classRetryingRequest.html#7ed20165c3a91ec5ba9d463244e90c75">RetryingRequest::ie_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="82f5c2058530aa3e3dbb15adf1bf192a"></a><!-- doxytag: member="RetryingRequest::pInterface_" ref="82f5c2058530aa3e3dbb15adf1bf192a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMercury_1_1NetworkInterface.html">Mercury::NetworkInterface</a>* <a class="el" href="classRetryingRequest.html#82f5c2058530aa3e3dbb15adf1bf192a">RetryingRequest::pInterface_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0adbf5b93c8d15f9510fdff0a0db1e39"></a><!-- doxytag: member="RetryingRequest::pParent_" ref="0adbf5b93c8d15f9510fdff0a0db1e39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSmartPointer.html">SmartPointer</a>&lt; <a class="el" href="classLoginHandler.html">LoginHandler</a> &gt; <a class="el" href="classRetryingRequest.html#0adbf5b93c8d15f9510fdff0a0db1e39">RetryingRequest::pParent_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="46e816cb3e844d91af7442bb44a5c353"></a><!-- doxytag: member="RetryingRequest::timerHandle_" ref="46e816cb3e844d91af7442bb44a5c353" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTimerHandle.html">TimerHandle</a> <a class="el" href="classRetryingRequest.html#46e816cb3e844d91af7442bb44a5c353">RetryingRequest::timerHandle_</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="retrying__request_8hpp.html">retrying_request.hpp</a><li><a class="el" href="retrying__request_8cpp.html">retrying_request.cpp</a></ul>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
