<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>height_map_compress.cpp File Reference</h1><code>#include &quot;<a class="el" href="lib_2terrain_2pch_8hpp.html">pch.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="height__map__compress_8hpp.html">terrain/height_map_compress.hpp</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="png_8hpp.html">moo/png.hpp</a>&quot;</code><br>

<p>
Include dependency graph for height_map_compress.cpp:<p><center><img src="height__map__compress_8cpp__incl.png" border="0" usemap="#height_map_compress.cpp_map" alt=""></center>
<map name="height_map_compress.cpp_map">
<area href="lib_2terrain_2pch_8hpp.html" shape="rect" coords="337,5,412,32" alt="">
<area href="height__map__compress_8hpp.html" shape="rect" coords="252,56,497,83" alt="">
<area href="png_8hpp.html" shape="rect" coords="320,107,429,133" alt="">
</map>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="stdmf_8hpp.html#1e081e4a0b1e69489f33b3f5d2b70a70">int32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#fe37ff1793bf0a8425c32b3bb53eabba">quantise</a> (float h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This converts a height value to an int32.  <a href="#fe37ff1793bf0a8425c32b3bb53eabba"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#dc724a2fa621f94d792d8f3b686037c4">unquantise</a> (<a class="el" href="stdmf_8hpp.html#1e081e4a0b1e69489f33b3f5d2b70a70">int32</a> q)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This converts a quantised height value to a float.  <a href="#dc724a2fa621f94d792d8f3b686037c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#2b5cfec137cad9ff69dc12a9b9bae92a">isQuantisedPNG</a> (<a class="el" href="classSmartPointer.html">BinaryPtr</a> data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This checks whether the data was compressed with quantised PNG.  <a href="#2b5cfec137cad9ff69dc12a9b9bae92a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#08750dba3092ac993c410403977e4d80">quantisedPNGDecompress</a> (<a class="el" href="classSmartPointer.html">BinaryPtr</a> data, <a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; &amp;heightMap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This decompresses the height map using the quantised PNG.  <a href="#08750dba3092ac993c410403977e4d80"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSmartPointer.html">BinaryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#58a38b6b587115e1d54331cab62a5e0a">quantisedPNGCompress</a> (<a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; const &amp;heightMap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This compresses the height map using quantised PNG.  <a href="#58a38b6b587115e1d54331cab62a5e0a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSmartPointer.html">BinaryPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceTerrain.html#3722d39063f17c41ff11bb525ef284db">Terrain::compressHeightMap</a> (<a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; const &amp;heightMap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This compresses the height map into something that can be stored on disk.  <a href="#3722d39063f17c41ff11bb525ef284db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceTerrain.html#15bc3310de9520e0e853aa3b59b52c98">Terrain::decompressHeightMap</a> (<a class="el" href="classSmartPointer.html">BinaryPtr</a> data, <a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; &amp;heightMap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This decompresses the height map.  <a href="#15bc3310de9520e0e853aa3b59b52c98"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#1c3eaab3e2d93fe7099337d1c815f751">QUANTISED_PNG_VERSION</a> = 0x71706e67</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is a magic number for checking whether the data was compressed using quantised PNG.  <a href="#1c3eaab3e2d93fe7099337d1c815f751"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="height__map__compress_8cpp.html#1b7a8a1b557fe9ecdbf85f769fa77772">QUANTISATION_LEVEL</a> = 0.001f</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The following are used to compress/decompress using quantised PNG.  <a href="#1b7a8a1b557fe9ecdbf85f769fa77772"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2b5cfec137cad9ff69dc12a9b9bae92a"></a><!-- doxytag: member="height_map_compress.cpp::isQuantisedPNG" ref="2b5cfec137cad9ff69dc12a9b9bae92a" args="(BinaryPtr data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool @184::isQuantisedPNG           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSmartPointer.html">BinaryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This checks whether the data was compressed with quantised PNG. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>The compressed data. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if the data was compressed as quantised PNG. </dd></dl>

</div>
</div><p>
<a class="anchor" name="fe37ff1793bf0a8425c32b3bb53eabba"></a><!-- doxytag: member="height_map_compress.cpp::quantise" ref="fe37ff1793bf0a8425c32b3bb53eabba" args="(float h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdmf_8hpp.html#1e081e4a0b1e69489f33b3f5d2b70a70">int32</a> @184::quantise           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>h</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This converts a height value to an int32. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>h</em>&nbsp;</td><td>The height value. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The quantised height value. </dd></dl>

</div>
</div><p>
<a class="anchor" name="58a38b6b587115e1d54331cab62a5e0a"></a><!-- doxytag: member="height_map_compress.cpp::quantisedPNGCompress" ref="58a38b6b587115e1d54331cab62a5e0a" args="(Moo::Image&lt; float &gt; const &amp;heightMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSmartPointer.html">BinaryPtr</a> @184::quantisedPNGCompress           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; const &amp;&nbsp;</td>
          <td class="paramname"> <em>heightMap</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This compresses the height map using quantised PNG. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>heightMap</em>&nbsp;</td><td>The height map to compress. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The compressed height map in binary form. </dd></dl>

</div>
</div><p>
<a class="anchor" name="08750dba3092ac993c410403977e4d80"></a><!-- doxytag: member="height_map_compress.cpp::quantisedPNGDecompress" ref="08750dba3092ac993c410403977e4d80" args="(BinaryPtr data, Moo::Image&lt; float &gt; &amp;heightMap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool @184::quantisedPNGDecompress           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSmartPointer.html">BinaryPtr</a>&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMoo_1_1Image.html">Moo::Image</a>&lt; float &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>heightMap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This decompresses the height map using the quantised PNG. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>The data to decompress. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>heightMap</em>&nbsp;</td><td>The decompressed height map. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True upon successful decompression, false otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="dc724a2fa621f94d792d8f3b686037c4"></a><!-- doxytag: member="height_map_compress.cpp::unquantise" ref="dc724a2fa621f94d792d8f3b686037c4" args="(int32 q)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float @184::unquantise           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdmf_8hpp.html#1e081e4a0b1e69489f33b3f5d2b70a70">int32</a>&nbsp;</td>
          <td class="paramname"> <em>q</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This converts a quantised height value to a float. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>The quantised height. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The unquantised height. </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="1b7a8a1b557fe9ecdbf85f769fa77772"></a><!-- doxytag: member="height_map_compress.cpp::QUANTISATION_LEVEL" ref="1b7a8a1b557fe9ecdbf85f769fa77772" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float <a class="el" href="height__map__compress_8cpp.html#1b7a8a1b557fe9ecdbf85f769fa77772">QUANTISATION_LEVEL</a> = 0.001f<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The following are used to compress/decompress using quantised PNG. 
<p>
Here we quantise each floating point height to integer coordinates on a millimetre grid. We then do a 32bpp PNG compression on the result. 
</div>
</div><p>
<a class="anchor" name="1c3eaab3e2d93fe7099337d1c815f751"></a><!-- doxytag: member="height_map_compress.cpp::QUANTISED_PNG_VERSION" ref="1c3eaab3e2d93fe7099337d1c815f751" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="stdmf_8hpp.html#0e55fb2a49437eb666626ca96962e6a2">uint32</a> <a class="el" href="height__map__compress_8cpp.html#1c3eaab3e2d93fe7099337d1c815f751">QUANTISED_PNG_VERSION</a> = 0x71706e67<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is a magic number for checking whether the data was compressed using quantised PNG. 
<p>

</div>
</div><p>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
