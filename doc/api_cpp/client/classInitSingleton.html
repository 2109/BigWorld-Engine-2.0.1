<html>
  <head><link rel="stylesheet" type="text/css" href="doxygen.css"></head>
  <body>
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr> <td align=left style="background:#0F5286"> <img src="bwlogo_bluebkg.png"> </td> </tr>
    </table>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>InitSingleton&lt; T &gt; Class Template Reference</h1><!-- doxytag: class="InitSingleton" --><!-- doxytag: inherits="Singleton" -->This class is used to implement singletons that are created through a init method and destroyed through a fini method.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;init_singleton.hpp&gt;</code>
<p>
Inheritance diagram for InitSingleton&lt; T &gt;:<p><center><img src="classInitSingleton__inherit__graph.png" border="0" usemap="#InitSingleton_3_01T_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="InitSingleton_3_01T_01_4__inherit__map">
<area href="classMoo_1_1MRTSupport.html" shape="rect" coords="5,155,288,181" alt="">
<area href="classPostProcessing_1_1Manager.html" shape="rect" coords="312,155,691,181" alt="">
<area href="classTerrain_1_1Manager.html" shape="rect" coords="715,155,989,181" alt="">
<area href="classSingleton.html" shape="rect" coords="440,5,563,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for InitSingleton&lt; T &gt;:<p><center><img src="classInitSingleton__coll__graph.png" border="0" usemap="#InitSingleton_3_01T_01_4__coll__map" alt="Collaboration graph"></center>
<map name="InitSingleton_3_01T_01_4__coll__map">
<area href="classSingleton.html" shape="rect" coords="16,5,139,32" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classInitSingleton-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#111e1a9eadc98c6fd8c704b331335523">s_finalised_</a></td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#3c44d3773a4eba1f8bea08c9a67d41f5">s_initedCount_</a></td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#de0fb04816dd40d7ad68359931f90071">init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method creates the singleton object and calls the virtual doInit method in the derived class if the reference count is 0.  <a href="#de0fb04816dd40d7ad68359931f90071"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#ffde07c48ea5461726ec81c8b1c99444">fini</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method calls the virtual doFini method in the derived class and deletes the singleton object if the reference count reaches 0.  <a href="#ffde07c48ea5461726ec81c8b1c99444"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#ec59081fc567f5d5068f7b872d29b341">finalised</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method allows checking if the class has been finalised, to avoid trying to access it after finalisation.  <a href="#ec59081fc567f5d5068f7b872d29b341"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#ac701766ec8bace03b8ea4895d70fc09">doInit</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#83959b0ffa540ebe1f7690c8d0b128f4">doFini</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#30da9053150b8451bdb32812f4e9a58b">s_finalised_</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInitSingleton.html#b6bbaef7c65a1c1ec41722db23e39b86">s_initedCount_</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br>
 class InitSingleton&lt; T &gt;</h3>

This class is used to implement singletons that are created through a init method and destroyed through a fini method. 
<p>
These methods are reference counted, allowing a class to init/fini other classes it depends on. Also, a virtual doInit method is called in the derived class if refcount is 0 in the init method, and a virtual doFini method is called in the derived class when refcount reaches 0 in the fini method.<p>
If creating a InitSingleton-derived class MyApp:<p>
class MyApp : public InitSingleton&lt; MyApp &gt; { };<p>
In cpp file, <a class="el" href="init__singleton_8hpp.html#a08fabcbb0bdff96b1606400349d82aa">BW_INIT_SINGLETON_STORAGE( MyApp )</a><p>
To use: <a class="el" href="namespaceBigWorldClientScript.html#7ea89aa35e06a37e668fc2b2e121063f">MyApp::init()</a>; // This will create the singleton if the refcount is 0. ... MyApp * pApp = MyApp::pInstance(); // pointer access MyApp &amp; app = <a class="el" href="namespacePersonality.html#78cbd75ed105cad4fc38477e3cd201ff">MyApp::instance()</a>; // reference access ... <a class="el" href="namespaceBigWorldClientScript.html#76985985b15981b28a71ba853a1c420e">MyApp::fini()</a>; // This will destroy the singleton when the refcount is 0. 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="83959b0ffa540ebe1f7690c8d0b128f4"></a><!-- doxytag: member="InitSingleton::doFini" ref="83959b0ffa540ebe1f7690c8d0b128f4" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::doFini           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Reimplemented in <a class="el" href="classPlayer.html#d79787e147020d0dfc3c8db693b6467a">Player</a>, <a class="el" href="classIME.html#84fd27e41d53ca44a95e889068265148">IME</a>, <a class="el" href="classMoo_1_1MRTSupport.html#aa2fde7cc67b18714d3c4ede26cdc6a5">Moo::MRTSupport</a>, <a class="el" href="classMaterialKinds.html#a32844f27b730bd440e1689d7435111b">MaterialKinds</a>, <a class="el" href="classLensEffectManager.html#5ea699170c85122b1d0680f8d6d6fbb0">LensEffectManager</a>, <a class="el" href="classFontManager.html#793cd750bd8eba6793d2981d9b5cc096">FontManager</a>, <a class="el" href="classTerrain_1_1Manager.html#473410949ab3c7d92ff246835ccdcf1a">Terrain::Manager</a>, and <a class="el" href="classParticleSystemManager.html#72765f7ccd4c224c8ab8248dd6a2a824">ParticleSystemManager</a>.
</div>
</div><p>
<a class="anchor" name="ac701766ec8bace03b8ea4895d70fc09"></a><!-- doxytag: member="InitSingleton::doInit" ref="ac701766ec8bace03b8ea4895d70fc09" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::doInit           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Reimplemented in <a class="el" href="classPlayer.html#b1ff2ebf65b1603ecfc48317e11edccf">Player</a>, <a class="el" href="classMoo_1_1MRTSupport.html#258370aa09b56d72fd87715b2f602953">Moo::MRTSupport</a>, <a class="el" href="classMaterialKinds.html#36845f749d2722d352e4cd96f08b458c">MaterialKinds</a>, <a class="el" href="classLensEffectManager.html#4732006d4933aad1a111a9dcdf1f6bd4">LensEffectManager</a>, <a class="el" href="classFontManager.html#29184e144f5c47654f53530e6c38f3aa">FontManager</a>, <a class="el" href="classTerrain_1_1Manager.html#ea7c9446432133bdc2cfc1a157693b3f">Terrain::Manager</a>, and <a class="el" href="classParticleSystemManager.html#d01c011b492924e97ff3b6b491cda830">ParticleSystemManager</a>.
</div>
</div><p>
<a class="anchor" name="ec59081fc567f5d5068f7b872d29b341"></a><!-- doxytag: member="InitSingleton::finalised" ref="ec59081fc567f5d5068f7b872d29b341" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::finalised           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method allows checking if the class has been finalised, to avoid trying to access it after finalisation. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>True if the fini has been called until the refcount is 0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ffde07c48ea5461726ec81c8b1c99444"></a><!-- doxytag: member="InitSingleton::fini" ref="ffde07c48ea5461726ec81c8b1c99444" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::fini           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method calls the virtual doFini method in the derived class and deletes the singleton object if the reference count reaches 0. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>True if it was succesful, false otherwise. </dd></dl>

<p>
Reimplemented in <a class="el" href="classParticleSystemManager.html#b2ccb73a68d6bc5eee80dc0fa6fca089">ParticleSystemManager</a>.
</div>
</div><p>
<a class="anchor" name="de0fb04816dd40d7ad68359931f90071"></a><!-- doxytag: member="InitSingleton::init" ref="de0fb04816dd40d7ad68359931f90071" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This method creates the singleton object and calls the virtual doInit method in the derived class if the reference count is 0. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>True if it was succesful, false otherwise. </dd></dl>

</div>
</div><p>
<a class="anchor" name="111e1a9eadc98c6fd8c704b331335523"></a><!-- doxytag: member="InitSingleton::s_finalised_" ref="111e1a9eadc98c6fd8c704b331335523" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; <a class="el" href="classPostProcessing_1_1Debug.html">PostProcessing::Debug</a> &gt;::<a class="el" href="classInitSingleton.html#30da9053150b8451bdb32812f4e9a58b">s_finalised_</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="3c44d3773a4eba1f8bea08c9a67d41f5"></a><!-- doxytag: member="InitSingleton::s_initedCount_" ref="3c44d3773a4eba1f8bea08c9a67d41f5" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; <a class="el" href="classPostProcessing_1_1Debug.html">PostProcessing::Debug</a> &gt;::<a class="el" href="classInitSingleton.html#b6bbaef7c65a1c1ec41722db23e39b86">s_initedCount_</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="30da9053150b8451bdb32812f4e9a58b"></a><!-- doxytag: member="InitSingleton::s_finalised_" ref="30da9053150b8451bdb32812f4e9a58b" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::<a class="el" href="classInitSingleton.html#30da9053150b8451bdb32812f4e9a58b">s_finalised_</a><code> [static, protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b6bbaef7c65a1c1ec41722db23e39b86"></a><!-- doxytag: member="InitSingleton::s_initedCount_" ref="b6bbaef7c65a1c1ec41722db23e39b86" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classInitSingleton.html">InitSingleton</a>&lt; T &gt;::<a class="el" href="classInitSingleton.html#b6bbaef7c65a1c1ec41722db23e39b86">s_initedCount_</a><code> [static, protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="init__singleton_8hpp.html">init_singleton.hpp</a></ul>
<p class="copyrightFooter">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>

</body>
</html>
